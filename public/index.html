<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Audio Stream</title>
    <style>
        body {
            margin: 0;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: #efefef;
            color: #333;
        }

        /* iOS 6 style header bar */
        .header {
            background: -webkit-gradient(linear, left top, left bottom,
                from(#f9f9f9), to(#c7ccd1));
            border-bottom: 1px solid #888;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            color: #333;
            text-shadow: 0 1px 0 #fff;
        }

        /* Page content */
        .container {
            padding: 15px;
        }

        /* iOS 6 glossy button */
        .button {
            display: inline-block;
            padding: 6px 14px;
            margin: 6px 0;
            background: -webkit-gradient(linear, left top, left bottom,
                from(#ffffff), to(#d0d0d0));
            border: 1px solid #999;
            border-radius: 6px;
            font-weight: bold;
            font-size: 14px;
            color: #333;
            text-shadow: 0 1px 0 #fff;
            -webkit-box-shadow: inset 0 1px 0 #fff,
                                0 1px 2px rgba(0, 0, 0, 0.2);
            text-decoration: none;
        }
        .button:active {
            background: -webkit-gradient(linear, left top, left bottom,
                from(#d0d0d0), to(#ffffff));
        }

        /* Debug log box styled like UITextView */
        pre {
            background: #fff;
            border: 1px solid #aaa;
            border-radius: 6px;
            padding: 10px;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            -webkit-box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
    </style>
</head>

<body>
    <div class="header">Audio Stream</div>
    <div class="container">
        <p>Tap play if it does not start automatically.</p>

        <audio controls autoplay style="width:100%; margin:8px 0;">
            <source src="/stream" type="audio/aac">
            Your browser does not support audio playback.
        </audio>

        <!-- Buttons -->
        <p>
            <a href="/settings.html" class="button">Audio Settings</a>
            <!-- <a href="/stream-symbian" class="button">Symbian Fallback</a> -->
        </p>

        <h3>Debug Logs</h3>
        <pre id="logBox">Loading logs...</pre>
    </div>

    <script type="text/javascript">
        function fetchLogs() {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "/logs", true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        document.getElementById("logBox").textContent = xhr.responseText;
                    } else {
                        document.getElementById("logBox").textContent = "Error loading logs";
                    }
                }
            };
            xhr.send();
        }

        fetchLogs();
        setInterval(fetchLogs, 2000);
    </script>
</body>
</html>
